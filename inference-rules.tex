\begin{figure}
\raggedright
%
\fbox {\(\Fx \vdash c \elabsto \F \)}\\
%

% \renewcommand{\arraystretch}{1.2}
% \begin{smathpar}
% \begin{array}{lcl}
% % \inserte{x} & \elabsto & \stabilize{\lambda(\stl,\stg).~
% %   \{ r \,|\, r = \{x \with \idf = \uid(x);\,r.\delf=\C{false};\,
% %                 \txnf = i\} \conj \uid(x) \notin \dom(\stl\cup\stg) \}}\\ 
% %
% %
% \updatee{\lambda x.e_1}{\lambda x.e_2} & \elabsto & \stabilize{
%   \lambda(\stl,\stg).~ \stg \bind (\lambda r.~ 
%   \{r' \,|\, [r/x]e_2 \conj r' = \{[r/x]e_1 \with 
%       \idf=r.\idf;\,\delf = r.\delf;\,\txnf=i \}) \} }\\ 
% %
% \deletee{\lambda x.e} & \elabsto & \stabilize{
%   \lambda(\stl,\stg).~ \stg \bind (\lambda r.~ 
%   \{r' \,|\, [r/x]e \conj r'=\{r \with \delf=\C{true}\})\} }\\ 
% %
% \end{array}
% \end{smathpar}

\begin{center} 
%
%\begin{minipage}{3.5in}
\begin{smathpar}
\begin{array}{c}
\RULE
{
}
{
  \Fx \vdash \inserte{x} ~\elabsto~ \stabilize
    {\inctxt{\Fx}
            {\lambda(\stg).~ \{ r \,|\, r = 
              \{\langle x \with \delf=\mathtt{false};\, 
                \txnf = i\rangle \}}}
}
\end{array}
\end{smathpar}
%\end{minipage}
%\begin{minipage}{3.5in}

\begin{smathpar}
\begin{array}{c}
\RULE
{
  G = \lambda r.~ \itel{[r/x]e_2}
      {\{r' \,|\, r' = \langle[r/x]e_1 \with \idf=r.\idf;\,\delf = r.\delf;\,\txnf=i\rangle \}}
      {\emptyset}
}
{
  \Fx \vdash \updatee{\lambda x.e_1}{\lambda x.e_2}  ~\elabsto~
  \stabilize{\inctxt{\Fx}{\lambda(\stg).~ \stg \bind G }}
}
\end{array}
\end{smathpar}
%\end{minipage}
%\begin{minipage}{3in}

\begin{smathpar}
\begin{array}{c}
\RULE
{
  G = \lambda r.~ \itel{[r/x]e}
      {\{r' \,|\, r' = \langle r \with \delf = \mathtt{true};\,\txnf=i\rangle \}}
      {\emptyset}
}
{
  \Fx \vdash \deletee{\lambda x.e}  ~\elabsto~
  \stabilize{\inctxt{\Fx}{\lambda(\stg).~ \stg \bind G }}
}
\end{array}
\end{smathpar}
%\end{minipage}

%\begin{minipage}{2.7in}
\begin{smathpar}
\begin{array}{c}
\RULE
{
  \Fx \vdash c \elabsto \F \spc
}
{
  \Fx \vdash \lete{x}{e}{c} ~\elabsto~  
    {\lambda(\stg).~ [e/x]\,\F(\stg)}\\
}
\end{array}
\end{smathpar}
%\end{minipage}

%\begin{minipage}{3in}
\begin{smathpar}
\begin{array}{c}
\RULE
{
  \Fx \vdash c \elabsto \F \\
  G = \lambda r.~ \itel{[r/x]e}{\{r' \,|\, r' = r \}}{\emptyset}\spc
  \F' = \stabilize{\inctxt{\Fx}{\lambda(\stg).~\stg \bind G}}

}
{
  \Fx \vdash \lete{y}{\selecte{\lambda x.e}}{c} ~\elabsto~  
    \lambda (\stg).~ [\F'(\stg)/y]\,\F(\stg)\\
}
\end{array}
\end{smathpar}
%\end{minipage}

%\begin{minipage}{3.2in}
\begin{smathpar}
\begin{array}{c}
\RULE
{
  \Fx \vdash c_1 \elabsto \F_1 \spc
  \Fx \vdash c_2 \elabsto \F_2 
}
{
  \Fx \vdash \ite{e}{c_1}{c_2} ~\elabsto~
    \lambda(\stg).~\itel{e}{\F_1(\stg)}{\F_2(\stg)}\\
}
\end{array}
\end{smathpar}
%\end{minipage}

%\begin{minipage}{3in}
\begin{smathpar}
\begin{array}{c}
\RULE
{
  \Fx \vdash c_1 \elabsto \F_1 \spc
  \Fx \cup \F_1 \vdash c_2 \elabsto \F_2 
}
{
  \Fx \vdash c_1;c_2 ~\elabsto~  \lambda(\stg).~\F_1(\stg) \cup \F_2(\stl \cup \F_1(\stg),\stg)
}
\end{array}
\end{smathpar}
%\end{minipage}
%

%
%\begin{minipage}{3in}
\begin{smathpar}
\begin{array}{c}
\RULE
{
  \Fx \vdash c \elabsto \F \spc
}
{
  \Fx \vdash \foreache{x}{\lambda y.\lambda z.~c} ~\elabsto~
  \lambda(\stg).~ x\bind(\lambda z.~\F(\stg))
}
\end{array}
\end{smathpar}
%\end{minipage}

\end{center}
%

\caption{\txnimp: State transformer semantics. }
\label{fig:inference-rules}
\end{figure}
