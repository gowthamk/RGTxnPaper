\begin{figure}
\raggedright
%
\begin{smathpar}
\begin{array}{lclcr}
  \mssemof{\nubar}{\stl \ALT \stg \ALT \ldots} & = &  
  (\top, \lambda (\vbar,r).\,r\in\stl) \ALT 
  (\top, \lambda (\vbar,r).\,r\in\stg) \ALT \ldots & \texttt{  }
  & |\vbar|=|\nubar|\\
%\fresh(g_x) \spc \fresh(g_\stl) \spc \fresh(g_\stg)\\
%
  \mssemof{\nubar}{\{x \,|\, \varphi\}} & = & (\top, 
    \lambda (\vbar,r).\,[r/x]\varphi) & \texttt{  }
  & |\vbar|=|\nubar|\\
%
\mssemof{\nubar}{\itel{\varphi}{s_1}{s_2}} & = & (\phi_1 \wedge \phi_2,~
    \lambda (\vbar,r).\, \C{if}\;\varphi\;\C{then}\; \G_1(\vbar,r)
      \;\C{else}\; \G_2(\vbar,r) & \texttt{  } 
  & (\phi_1,\G_1)=\mssemof{\nubar}{s_1} \spc
    (\phi_2,\G_2)=\mssemof{\nubar}{s_2} \\
%
  \mssemof{\nubar}{s_1 \cup s_2} & = & (\phi_1 \wedge \phi_2,~
      \lambda (\vbar,r).\, \G_1(\vbar,r) \vee \G_2(\vbar,r)) & \texttt{ } 
  & (\phi_1,\G_1)=\mssemof{\nubar}{s_1} \spc
    (\phi_2,\G_2)=\mssemof{\nubar}{s_2} \\
%
\mssemof{\nubar}{s_1 \bind \lambda x. s_2} & = & (\phi_1 \wedge \phi_2
  \wedge \forall \nubar.\forall a.\forall b. ~\pi(\nubar)
  \Leftrightarrow & \texttt{  } & \fresh(a) \spc \fresh(b) \spc 
  \fresh(\pi) \spc \fresh(g)\\
& & \hspace*{0.65in}\G_1(\nubar,a) \wedge \G_2(\nubar,a,b)
    \Leftrightarrow g(\nubar,b), & \texttt{  }
  & (\phi_1,\G_1)=\mssemof{\nubar}{s_1} \spc
    (\phi_2,\G_2)=\mssemof{\nubar,a}{[a/x]s_2} \\
& & ~\lambda (\vbar,r).\,\pi(\vbar) \conj g(\vbar,r))
  & \texttt{  } & |\vbar| = |\nubar|\\
%
\mssemof{\nubar}{\existsl(\stg,\phi,s)} & = & (\phi_s \wedge 
  \forall a.\forall b.~ f(\nubar,a) \wedge 
        f(\nubar,b) \Rightarrow a = b& \texttt{  }
  & \fresh(a) \spc \fresh(b)\\
& &\hspace*{0.2in}\wedge \forall \nubar.\forall a.\forall b.~ \pi(\nubar) 
  \Leftrightarrow \C{if}\;f(\nubar,a) \wedge [a/\stg]\phi & \texttt{  }
  & \fresh(f) \spc \fresh(\pi)\spc\fresh(g)\\
& & \hspace*{0.75in}\C{then}\; g(\nubar,b)=\G_s(\nubar,a,b)\;\C{else}\;\bot, 
  & \texttt{  } 
  & (\phi_s,\G_s)=\mssemof{\nubar,a}{[a/\stg]s} \\
& & ~\lambda (\vbar,r).\,\pi(\vbar) \conj g(\vbar,r)) & \texttt{  }
% \conj \forall b.~ g(b) \Leftrightarrow g_1(b)
  & |\vbar| = |\nubar|\\
%
\end{array}
\end{smathpar}

\caption{Encoding $\SL$ in first-order logic}
\label{fig:logic}
\end{figure}
